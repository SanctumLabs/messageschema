# Signing

This documents the process of signing the library using PGP keys. This is to ensure the validity o the library &
validate that
the library that is in use in fact generated by SanctumLabs and not another party. The key can be verified on
the [KeyServer](https://keyserver.ubuntu.com/) as that is where it is published.

## Key Generation

In order to generate keys for use, the first step is to ensure the `gpg` tool is available. More information can be
found [here](https://www.gnupg.org/documentation/howtos.html).

Next step is to generate the keys for use:

```shell
gpg --full-generate-key
```

1. You will then be required to select the kind of key you want. You can press Enter to select the default key.
2. Enter the desired key size, the recommended key to use is 4096 bits
3. Enter the length of time the key should be valid. Press Enter to select the default selection, meaning the key does
   not expire
4. Afterwards, enter your full name
5. Email address
6. Enter a comment or skip
7. Enter your passphrase

Now, you can list the key generated with:

```shell
gpg --list-secret-keys --keyid-format SHORT
```

This will list all the secret keys like below:

```plain
sec   rsa4096/9B3DBE2F 2023-09-07 [SC]
      46D56135BE93410B58CF23E0065696DA9B3DBE2F
uid         [ultimate] <YOUR_NAME> <YOUR_ENTERED_EMAIL_ADDRESS>
ssb   rsa4096/D16BCCC5 2023-09-07 [E]
```

> Note that the above is a sample and some values have been omitted for brevity. The values in <> brackets will be
> filled with the information from the steps above.

The `Key id/fingerprint` will be the 40 character string on the second line of `sec`
The last 8 characters(shown on the first line after `rsa4096, 9B3DBE2F`) are sufficient to uniquely identify the key and
is referred to as the <key id>

Therefore, the key id is `9B3DBE2F` from the above sample.

Next, the public key can be uploaded to a Key server; Maven Central uses `hkp://keyserver.ubuntu.com`

```shell
gpg --keyserver hkp://keyserver.ubuntu.com --send-keys <key id>
```

> Ensure you enter the <key id> to upload the key

Once, done, you can verify that the upload of the key has been done by visiting the site https://keyserver.ubuntu.com/
and searching for the key using the key id.
Note that in the search box, prefix your key id with `0x`, so, for the example above it will be `0x9B3DBE2F`

To Get the key:

```shell
gpg --armor --export-secret-keys <YOUR EMAIL ADDRESS>
```

> Ensure to enter the email address you used to generate the key

## References

- [Signing Plugin](https://docs.gradle.org/current/userguide/signing_plugin.html)
